input
{
	http
	{
		port => 8081
	}
}

filter
{
	ruby {
			code => '
					event.get("context").each { |k, v|
							event.set(k,v)
					}
			'
	}

	mutate
	{
		remove_field => ["context", "headers", "host", "level", "level_name", "channel"]
	}
}

output
{
	stdout{

	}
	
	#elasticsearch
	#{
	#	hosts => "http://elasticsearch:9200"
	#	index => "business-log-%{+YYYY.MM.dd}"
	#}

	elasticsearch
    {
        hosts => [ "https://observability-deployment-datafactory.es.europe-west3.gcp.cloud.es.io:9243" ] 
        index => "business-log-%{+YYYY.MM.dd}" 
        user => "elastic" 
        password => "qdnFibVVqbNEqeRT4oTcVtHY"
    }
}